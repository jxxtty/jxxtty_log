## Spring Boot에 Swagger 적용하기 (gradle)

---
### 1. build.gradle에 dependency 추가하기
```java
// swagger
implementation "io.springfox:springfox-boot-starter:3.0.0"
implementation "io.springfox:springfox-swagger-ui:3.0.0"
```  
  
### 2. SwaggerConfig 추가
```java
package com.example.securitypracitce.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.ApiInfoBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.ApiInfo;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

@Configuration
@EnableSwagger2
public class SwaggerConfig {

    @Bean
    public Docket api() {
        return new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(swaggerInfo())
                .select()
                .apis(RequestHandlerSelectors.any()) // 대상 패키지 설정
                .paths(PathSelectors.any())
                .build();
    }

    private ApiInfo swaggerInfo() {
        return new ApiInfoBuilder()
                .title("Spring Security Practice API문서") // 문서 제목
                .description("Spring Security Practice 프로젝트") // 문서 설명
                .version("1.0.0")
                .build();
    }
}
```
여기까지 설정해준 후에 서버를 실행하고 `localhost:9090/swagger-ui/index.html`로 접속하면 아래와같은 화면을 확인할 수 있다.  
  
<img src="https://user-images.githubusercontent.com/93504767/148736209-fcaf9425-c786-440d-9023-467e064a79a5.png" width="600">  
  
### 3. annotation으로 Swagger 문서 관리하기
현재 아무런 어노테이션을 달아놓지 않은 회원가입 API는 아래와 같이 보인다.  
<img src="https://user-images.githubusercontent.com/93504767/148736687-b9d7de76-125a-442a-8960-d4f92546a623.png" width="800">
  
`@Api`, `@ApiOperation`, `@ApiImplicitParams` 어노테이션을 이용해 아래와같이 작성해준다.  
```java
@Api(tags = {"사용자"})
@RestController
public class UserController {
    ...

    @PostMapping("/signup")
    @ApiOperation(value = "회원가입 API", notes = "사용자 정보를 저장합니다.")
    @ApiImplicitParams({
            @ApiImplicitParam(name = "userDto", value = "사용자 dto", required = true, dataType = "UserDto")
    })
    public ResponseEntity<UserDto> signup(@RequestBody UserDto userDto) {
        return ResponseEntity.ok(userService.signup(userDto));
    }
}
```  
  
이렇게 설정해주면 swagger 문서는 아래와같이 변경된다.  
<img src="https://user-images.githubusercontent.com/93504767/148737238-af2cab45-a3aa-4fdb-b0e5-96a06ef2748a.png" width="700">  
<img src="https://user-images.githubusercontent.com/93504767/148737376-e6f6a07e-83ec-4af7-a4cf-d38c41a7365f.png" width="800">  
  
### 4. spring security 관련 jwt토큰 추가하기
내일 추가예정^__^